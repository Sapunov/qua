## /search

- GET **/search** - поиск по введенному тексу


### `GET` /search

**Параметры:**

- **query** - текст запроса
- **spelling** - включена или выключена коррекция запроса (по умолчанию включена)
- **limit** - сколько результатов должно быть получено
- **offset** - сдвиг относительно начала набора результатов


**Формат ответа:**

```json
{
    "hits": [],
    "max_score": <float>,
    "min_score": <float>,
    "query": <string>,
    "suggested_query": <string>,
    "total": <int>
}
```

В соответствии с [требованиями к микросервисам поиска](../../ext/search_services.md) поля **max_score**, **min_score**, **query**, **total** имеют статус обязательных и описаны по ссылке выше.

Более интересен другой объект. Каждый *hit* имеет следующую структуру:

```json
{
            "_item_id": <string>,
            "_loc": <string>,
            "_score": <float>,
            "_type": <string>,
            "ext_id": <int>,
            "image": <string> | null,
            "is_external": <bool>,
            "keywords": [<string>, <string>, ...],
            "resource": <string> | null,
            "snippet": <string>,
            "title": <string>
        }

```

Здесь, опять же, поля с нижним подчеркиванием в начале являются обязательными и описаны по ссылке выше.

Поле **ext_id** - это идентификатор из внешней базы данных. Так как сервис поиска занимается поиском, а не хранением данных, то это поле является привязкой к записи в базе данных внешнего сервиса. В данном случае сервиса *ext*.

Поле **images** - ссылка на картинку, которую можно вставить в выдачу. Если к результату поиска не полагается картинка, то это поле имеет значение *null*.

Поле **is_external** - показатель является ли результат внешней ссылкой или это внутренний вопрос, созданный в системе.

Поле **keywords** - ключевые слова, по которым может быть найден данный результат. Если ключевых слов нет, то выводится пустой массив.

Поле **resource** - если результат внешний, то в данном поле написан url адрес, по которому стоит отправить пользователя. Если вопрос внутренний, то данное поле будет *null*.

Поле **snippet** - краткое описание поискового результата, созданное в зависимости от заданного поискового запроса.

Поле **title** - заголовок вопроса или ресурса, определяемый пользователем или заголовком ресурса.
